<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <button class="des">-</button>
  <span id="count">0</span>
  <button class="in">+</button>
</body>
<script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
<script>
  //1.定义reducer函数：
  function reducer(state = { count: 0 }, action) {
    if (action.type === 'DESCREMENT') {
      return ({ count: state.count - 1 })
    }
    if (action.type === 'INCREMENT') {
      return ({ count: state.count + 1 })
    }
    return state//返回一个对象
  }
  //2.使用creatStore方法传入reducer函数，生成一个store实例对象
  const store = Redux.creatStore(reducer)
  //3.使用store实例的subscribe方法订阅数据的变化（数据一旦变化，可以得到通知）
  // 回调函数可以在每次state发生变化的时候自动执行
  store.subscribe(() => {
    console.log('数据发生变化');
    document.getElementById('count').innerText = store.getState().count;
  });
  //4.使用store实例的dispatch方法提交action对象触发数据变化（告诉reducer你想怎么更改数据）
  const deB = document.querySelector('.des');
  des.addEventListener('click', () => {
    store.dispatch({ type: 'DESCREMENT', count: store.getState().count });
  });
  const inB = document.querySelector('.in');
  incrementButton.addEventListener('click', () => {
    store.dispatch({ type: 'INCREMENT', count: store.getState().count });
  });
  //5.使用store实例的getState方法获取最新的状态数据更新到视图中
</script>

</html>
<!--  "@reduxjs/toolkit": "^2.6.1", 简化代码的工具包-->
<!--  "react-redux": "^9.2.0",  用来连接react和redux-->